!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e["js-flock"]=n()}(this,function(){"use strict";var e=Object.freeze({isStrangled:!0,message:"Promise have timed out"}),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t={freeze:Object.isFrozen,seal:Object.isSealed,preventExtensions:function(e){return!Object.isExtensible(e)}},r=function e(r,o,i){i=i||{},Object[r](o);for(var u in o){var f=o[u];!f||"object"!==(void 0===f?"undefined":n(f))&&"function"!=typeof f||t[r](f)||!i.proto&&!o.hasOwnProperty(u)||e(r,f,i)}return o},o=function(e,n){if(!e)throw new TypeError(n)},i=function(e){return Object.prototype.toString.call(e)},u=function(e){return!(!e||"[object Object]"!==i(e))},f=function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e){var n=function(e,n){return"promisify: expected ["+e+"] but got "+i(n)+"]"},t=function(e,n,t){var r=this;return new Promise(function(o,i){n.push(function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];return e?i(e):o(t&&t.multiArgs?r:r[0])}),e.apply(r,n)})},r=function(e,n,t,r,o){return"function"==typeof n[e]&&!0!==n[e].__promisified__&&(!0===o||n.hasOwnProperty(e))&&(!r||r.some(function(n){return n===e}))&&(!t||t.every(function(n){return n!==e}))},f=function e(n,t,r){var o=""+t+r;return o in n?e(n,o,"Promisified"):o},c=function(e,r){return o("function"==typeof e,n("Function",e)),function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.call(this,e,o,r)}};c.all=function(e,t){o(u(e),n("Object",e));var i=t||{},s=i.suffix,a=i.exclude,y=i.include,l=i.proto;s="string"==typeof s?s:"Async",a=Array.isArray(a)?a:void 0,y=Array.isArray(y)?y:void 0;for(var p in e)if(r(p,e,a,y,l)){var v=f(e,p,s);e[v]=c(e[p],t),e[v].__promisified__=!0}return e},e.exports=c}),c=function e(n,t,r,o,i,u){var f=t(i),c=t(u);return f===c?r&&r.length>o?e(n,r[o],r,o+1,i,u):0:f<c?-n:null==f?1:null==c?-1:n},s=c.bind(null,1),a=c.bind(null,-1),y=function(e){return e},l=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return Array.isArray(e)?Array.isArray(t)?e.sort(n.bind(void 0,t.shift(),t,0)):e.sort(n.bind(void 0,t,void 0,0)):e},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e){if(Array.isArray(e)){var n={};return e.forEach(function(e){n[e]=Symbol(e)}),n}return"object"===(void 0===e?"undefined":p(e))?Object.assign({},e):{}},d=function(e,n){var t=e[n];"function"==typeof t&&(t=t.bind(e))};return{collar:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=new Promise(function(n,r){return setTimeout(r,t,e)});return Promise.race([r,n])},deepFreeze:function(e,n){return r("freeze",e,n)},deepPreventExtensions:function(e,n){return r("preventExtensions",e,n)},deepSeal:function(e,n){return r("seal",e,n)},last:function(e,n){var t=Array.isArray(e)?e.length:0;if(t){if("function"!=typeof n)return e[t-1];for(;--t;)if(n(e[t]))return e[t]}},promisify:f,singular:function(e){var n=!1,t=function(){n=!1};return function(){if(!n){n=!0;for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];o.unshift(t),e.apply(this,o)}}},sort:function(e){return{asc:function(n){return l(e,s,n)},desc:function(n){return l(e,a,n)}}},toEnum:function(e){var n=v(e),t=Object.keys(n).filter(function(e){return"function"!=typeof n[e]}),r=t.map(function(e){return n[e]});if(new Set(r).size!==r.length)throw new TypeError("toEnum: Duplicate values detected");Object.freeze(t),Object.freeze(r),Object.keys(n).forEach(function(e){return d(n,e)});var o={keySet:void 0,valueSet:void 0};return n.keys=function(){return t},n.values=function(){return r},n.haveKey=function(e){return o.keySet=o.keySet||new Set(t),o.keySet.has(e)},n.exists=function(e){return o.valueSet=o.valueSet||new Set(r),o.valueSet.has(e)},Object.freeze(n)}}});
