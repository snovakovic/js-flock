!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e["js-flock"]=n()}(this,function(){"use strict";var e=Object.freeze({isStrangled:!0,message:"Promise have timed out"}),n={freeze:Object.isFrozen,seal:Object.isSealed,preventExtensions:function(e){return!Object.isExtensible(e)}},r=function e(r,t,i){i=i||{},Object[r](t);for(var o in t){var u=t[o];!u||"object"!==(void 0===u?"undefined":babelHelpers.typeof(u))&&"function"!=typeof u||n[r](u)||!i.proto&&!t.hasOwnProperty(o)||e(r,u,i)}return t},t=function(e,n){if(!e)throw new TypeError(n)},i=function(e){return Object.prototype.toString.call(e)},o=function(e){return!(!e||"[object Object]"!==i(e))},u=function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e){var n=function(e,n){return"promisify: expected ["+e+"] but got "+i(n)+"]"},r=function(e,n,r){var t=this;return new Promise(function(i,o){n.push(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),u=1;u<n;u++)t[u-1]=arguments[u];return e?o(e):i(r&&r.multiArgs?t:t[0])}),e.apply(t,n)})},u=function(e,n,r,t,i){return"function"==typeof n[e]&&!0!==n[e].__promisified__&&(!0===i||n.hasOwnProperty(e))&&(!t||t.some(function(n){return n===e}))&&(!r||r.every(function(n){return n!==e}))},f=function e(n,r,t){var i=""+r+t;return i in n?e(n,i,"Promisified"):i},c=function(e,i){return t("function"==typeof e,n("Function",e)),function(){for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return r.call(this,e,t,i)}};c.all=function(e,r){t(o(e),n("Object",e));var i=r||{},s=i.suffix,a=i.exclude,l=i.include,y=i.proto;s="string"==typeof s?s:"Async",a=Array.isArray(a)?a:void 0,l=Array.isArray(l)?l:void 0;for(var p in e)if(u(p,e,a,l,y)){var v=f(e,p,s);e[v]=c(e[p],r),e[v].__promisified__=!0}return e},e.exports=c}),f=function e(n,r,t,i,o,u){var f=r(o),c=r(u);return f===c?t&&t.length>i?e(n,t[i],t,i+1,o,u):0:f<c?-n:null==f?1:null==c?-1:n},c=f.bind(null,1),s=f.bind(null,-1),a=function(e){return e},l=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return Array.isArray(e)?Array.isArray(r)?e.sort(n.bind(void 0,r.shift(),r,0)):e.sort(n.bind(void 0,r,void 0,0)):e},y=function(e){if(Array.isArray(e)){var n={};return e.forEach(function(e){n[e]=Symbol(e)}),n}return"object"===(void 0===e?"undefined":babelHelpers.typeof(e))?Object.assign({},e):{}},p=function(e,n){var r=e[n];"function"==typeof r&&(r=r.bind(e))};return{collar:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,t=new Promise(function(n,t){return setTimeout(t,r,e)});return Promise.race([t,n])},deepFreeze:function(e,n){return r("freeze",e,n)},deepPreventExtensions:function(e,n){return r("preventExtensions",e,n)},deepSeal:function(e,n){return r("seal",e,n)},last:function(e,n){var r=Array.isArray(e)?e.length:0;if(r){if("function"!=typeof n)return e[r-1];for(;--r;)if(n(e[r]))return e[r]}},promisify:u,singular:function(e){var n=!1,r=function(){n=!1};return function(){if(!n){n=!0;for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];i.unshift(r),e.apply(this,i)}}},sort:function(e){return{asc:function(n){return l(e,c,n)},desc:function(n){return l(e,s,n)}}},toEnum:function(e){var n=y(e),r=Object.keys(n).filter(function(e){return"function"!=typeof n[e]}),t=r.map(function(e){return n[e]});if(new Set(t).size!==t.length)throw new TypeError("toEnum: Duplicate values detected");Object.freeze(r),Object.freeze(t),Object.keys(n).forEach(function(e){return p(n,e)});var i={keySet:void 0,valueSet:void 0};return n.keys=function(){return r},n.values=function(){return t},n.haveKey=function(e){return i.keySet=i.keySet||new Set(r),i.keySet.has(e)},n.exists=function(e){return i.valueSet=i.valueSet||new Set(t),i.valueSet.has(e)},Object.freeze(n)}}});
